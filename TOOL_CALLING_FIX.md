# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Tool Calling: –æ—Ç –∫–æ—Å—Ç—ã–ª—è –∫ —Å—Ç–∞–Ω–¥–∞—Ä—Ç—É

## üö® –ü—Ä–æ–±–ª–µ–º–∞

–ò–∑–Ω–∞—á–∞–ª—å–Ω–æ —è —Ä–µ–∞–ª–∏–∑–æ–≤–∞–ª **–∫–∞—Å—Ç–æ–º–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç** –¥–ª—è –≤—ã–∑–æ–≤–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤:
```
[TOOL_CALL:–∏–º—è_–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞:–ø–∞—Ä–∞–º–µ—Ç—Ä—ã]
```

–≠—Ç–æ –±—ã–ª **–∫–æ—Å—Ç—ã–ª—å**, –∞ –Ω–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Å–ø–æ—Å–æ–±!

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

–ó–∞–º–µ–Ω–∏–ª –Ω–∞ **–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–µ Ollama API** tool calling —Å–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.

### –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç Ollama

#### 1. –û—Ç–ø—Ä–∞–≤–ª—è–µ–º tools –≤ –∑–∞–ø—Ä–æ—Å–µ:
```python
payload = {
    "model": "mistral:latest",
    "messages": [{"role": "user", "content": "–ü–æ–∫–∞–∂–∏ —Å–ª–æ—Ç—ã"}],
    "tools": [
        {
            "type": "function",
            "function": {
                "name": "get_available_slots",
                "description": "Get available time slots",
                "parameters": {
                    "type": "object",
                    "properties": {},
                    "required": []
                }
            }
        }
    ]
}
```

#### 2. –ú–æ–¥–µ–ª—å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç tool_calls:
```json
{
    "message": {
        "tool_calls": [
            {
                "function": {
                    "name": "get_available_slots", 
                    "arguments": {}
                }
            }
        ]
    }
}
```

#### 3. –í—ã–ø–æ–ª–Ω—è–µ–º –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:
```python
# –î–æ–±–∞–≤–ª—è–µ–º tool call –≤ –∏—Å—Ç–æ—Ä–∏—é
messages.append({
    "role": "assistant",
    "tool_calls": tool_calls
})

# –í—ã–ø–æ–ª–Ω—è–µ–º MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç
result = await mcp_client.call_tool(tool_name, tool_args)

# –î–æ–±–∞–≤–ª—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
messages.append({
    "role": "tool",
    "content": result["content"][0]["text"]
})

# –í—Ç–æ—Ä–æ–π –∑–∞–ø—Ä–æ—Å —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏
final_response = ollama.chat_with_tools(messages, tools)
```

## üìÅ –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. **interactive_chat.py** - –ø–æ–ª–Ω–∞—è –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∞:
   - –ù–æ–≤—ã–π –∫–ª–∞—Å—Å `OllamaIntegration` —Å–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º API
   - –ú–µ—Ç–æ–¥ `chat_with_tools()` –≤–º–µ—Å—Ç–æ `query_ollama()`
   - –§—É–Ω–∫—Ü–∏—è `handle_tool_calls()` –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤
   - –£–¥–∞–ª–µ–Ω –ø–∞—Ä—Å–∏–Ω–≥ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞ `[TOOL_CALL:...]`

2. **test_standard_tool_calling.py** - –Ω–æ–≤—ã–π —Ç–µ—Å—Ç:
   - –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã tool calling

3. **README.md** - –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
   - –£–±—Ä–∞–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–∞—Å—Ç–æ–º–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ
   - –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–∏–º–µ—Ä—ã —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ API
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

## üß™ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

```bash
python3 test_standard_tool_calling.py
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –¢–ï–°–¢ 3 (–ø–æ–∏—Å–∫ —Ä–µ–≥–ª–∞–º–µ–Ω—Ç–æ–≤) - —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–¥–µ–∞–ª—å–Ω–æ
- ‚ùå –¢–ï–°–¢ 1-2 - –º–æ–¥–µ–ª—å –Ω–µ –≤—Å–µ–≥–¥–∞ –≤—ã–∑—ã–≤–∞–µ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

**–ü—Ä–∏—á–∏–Ω–∞:** `mistral:latest` –Ω–µ –æ—á–µ–Ω—å —Ö–æ—Ä–æ—à–æ –ø–æ–Ω–∏–º–∞–µ—Ç –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å tools.

## üéì –û–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è —Ü–µ–Ω–Ω–æ—Å—Ç—å

–¢–µ–ø–µ—Ä—å —Å—Ç—É–¥–µ–Ω—Ç—ã –∏–∑—É—á–∞—é—Ç:
- **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π** —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π Ollama API  
- **–û—Ñ–∏—Ü–∏–∞–ª—å–Ω—É—é** –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é tool calling
- **–†–µ–∞–ª—å–Ω—ã–µ** –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã
- **–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ** —Ñ–æ—Ä–º–∞—Ç—ã JSON-RPC

## üöÄ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã** - –Ω–∏–∫–∞–∫–∏—Ö –∫–∞—Å—Ç–æ–º–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤
2. **–ß–∏—Ç–∞–π—Ç–µ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é** —á–µ—Ä–µ–∑ context7
3. **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Å —Ä–∞–∑–Ω—ã–º–∏ –º–æ–¥–µ–ª—è–º–∏** - –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –ª—É—á—à–µ —Ä–∞–±–æ—Ç–∞—é—Ç —Å tools
4. **–ò–∑—É—á–∞–π—Ç–µ –≥–æ—Ç–æ–≤—ã–µ —Ä–µ—à–µ–Ω–∏—è** –≤–º–µ—Å—Ç–æ –∏–∑–æ–±—Ä–µ—Ç–µ–Ω–∏—è –≤–µ–ª–æ—Å–∏–ø–µ–¥–∞

---

**–£—Ä–æ–∫:** –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –ø–µ—Ä–µ–¥ –∏–∑–æ–±—Ä–µ—Ç–µ–Ω–∏–µ–º —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π! ü§ì 